{% extends 'base.html' %}
{% block title %}Payment Receipt{% endblock %}
{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg">
                <div class="card-header bg-success text-white text-center">
                    <h3 class="mb-0">üßæ Payment Receipt</h3>
                    <p class="mb-0">Vehicle Parking System</p>
                </div>
                <div class="card-body">
                    <div class="text-center mb-4">
                        <h4 class="text-success">‚úÖ Payment Successful!</h4>
                        <p class="text-muted">Your parking session has been completed</p>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="fw-bold">Booking Details:</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Receipt ID:</strong></td>
                                    <td>#{{ receipt.booking_id }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Parking Spot:</strong></td>
                                    <td>{{ receipt.spot_id }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Location:</strong></td>
                                    <td>{{ receipt.lot_name }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Vehicle Number:</strong></td>
                                    <td>{{ receipt.vehicle_number or 'N/A' }}</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="col-md-6">
                            <h6 class="fw-bold">Time & Duration:</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Start Time:</strong></td>
                                    <td>{{ receipt.start_time.strftime('%d/%m/%Y %H:%M') }}</td>
                                </tr>
                                <tr>
                                    <td><strong>End Time:</strong></td>
                                    <td>{{ receipt.end_time.strftime('%d/%m/%Y %H:%M') }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Duration:</strong></td>
                                    <td>{{ receipt.duration_hours }} hours</td>
                                </tr>
                                <tr>
                                    <td><strong>Rate:</strong></td>
                                    <td>‚Çπ{{ receipt.price_per_hour }}/hour</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <hr>
                    
                    <div class="row">
                        <div class="col-12">
                            <div class="bg-light p-3 rounded text-center">
                                <h4 class="mb-2">Total Amount Paid</h4>
                                <h2 class="text-success fw-bold">‚Çπ{{ "%.2f"|format(receipt.total_cost) }}</h2>
                                <p class="text-muted mb-0">{{ receipt.duration_hours }} hours √ó ‚Çπ{{ receipt.price_per_hour }}/hour</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <p class="text-muted">Thank you for using our parking system!</p>
                        <div class="d-flex gap-2 justify-content-center">
                            <a href="{{ url_for('user_dashboard') }}" class="btn btn-primary">Back to Dashboard</a>
                            <button onclick="window.print()" class="btn btn-outline-secondary">üñ®Ô∏è Print Receipt</button>
                        </div>
                    </div>
                </div>
                <div class="card-footer text-center text-muted">
                    <small>Receipt generated on {{ receipt.end_time.strftime('%d/%m/%Y at %H:%M') }}</small>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
@media print {
    .btn, .navbar, .card-footer { display: none !important; }
    .card { border: none !important; box-shadow: none !important; }
}
</style>
{% endblock %}
